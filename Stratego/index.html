<!DOCTYPE html>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/Other/html.html to edit this template
-->
<html>
    <head>
	<title>TODO supply a title</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
	<div>TODO write content</div>
    </body>
</html>
x;
margin: 20px auto;
width: fit-content;
background: #444;
padding: 8px;
border: 3px solid #555;
border-radius: 8px;
}

.cell {
width: 60px;
height: 60px;
background: #8bc34a;
border: 2px solid #4caf50;
border-radius: 6px;
display: flex;
align-items: center;
justify-content: center;
font-size: 28px;
font-weight: bold;
cursor: pointer;
user-select: none;
position: relative;
}

.cell.lake {
background: #2196f3;
border-color: #1976d2;
cursor: default;
}

.red    { background: #f44336; border-color: #d32f2f; color: white; }
.blue   { background: #448aff; border-color: #2979ff; color: white; }
.hidden { filter: brightness(0.4) contrast(0.7); }

.piece {
width: 56px;
height: 56px;
line-height: 56px;
text-align: center;
border-radius: 6px;
font-size: 32px;
font-weight: bold;
box-shadow: 0 3px 6px rgba(0,0,0,0.5);
cursor: grab;
}

.selected { box-shadow: 0 0 0 4px gold, inset 0 0 10px gold; }

#status {
font-size: 1.3rem;
margin: 15px;
min-height: 1.6em;
}

.small-label {
position: absolute;
font-size: 11px;
bottom: 2px;
right: 4px;
opacity: 0.7;
}
</style>
</head>
<body>

    <h1>Stratego (visible pieces â€“ for learning)</h1>

    <div id="status">Red to move â€¢ Drag your pieces</div>

    <div id="board"></div>

    <script>
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Piece types (classic Stratego ranking)
    // Higher number = stronger (except special cases)
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
	const PIECES = {
	    'B': {name: "Bomb", rank: -1, canMove: false},
	    'F': {name: "Flag", rank: -2, canMove: false},
	    'S': {name: "Spy", rank: 10, beats: 1}, // Spy beats Marshal only
	    '1': {name: "Scout", rank: 2},
	    '2': {name: "Miner", rank: 3}, // Miner defuses bombs
	    '3': {name: "Sergeant", rank: 4},
	    '4': {name: "Lieutenant", rank: 5},
	    '5': {name: "Captain", rank: 6},
	    '6': {name: "Major", rank: 7},
	    '7': {name: "Colonel", rank: 8},
	    '8': {name: "General", rank: 9},
	    '9': {name: "Marshal", rank: 10}
	};
    
	const RED_SETUP = [
	    "9 8 7 6 5 5 4 4 3 3",
	    "6 7 B B B B S 2 2 1",
	    "1 1 1 3 4 6 F B B 2",
	    "B B B 8   .   .   B B"
	].join("").split(" ");
    
	const BLUE_SETUP = [
	    "B B 8   .   .   B B B B",
	    "2 1 1 1 3 4 6 F B B",
	    "1 2 S B B B B 7 6 5",
	    "5 4 3 3 2 6 7 8 9"
	].join("").split(" ");
    
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Board (10Ã—10) â€“ lakes in center
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
	const board = Array(10 * 10).fill(null);
    
	function idx(r, c) {
	    return r * 10 + c;
	}
    
	function isLake(r, c) {
	    return (r === 4 || r === 5) && (c === 2 || c === 3 || c === 6 || c === 7);
	}
    
	function placePieces() {
	    // Red (top â€“ rows 0â€“3)
	    for (let i = 0; i < 40; i++) {
		const r = Math.floor(i / 10);
		const c = i % 10;
		if (!isLake(r, c)) {
		    const type = RED_SETUP[i];
		    if (type !== ".")
			board[idx(r, c)] = {color: "red", type};
		}
	    }
	
	    // Blue (bottom â€“ rows 6â€“9)
	    for (let i = 0; i < 40; i++) {
		const r = 6 + Math.floor(i / 10);
		const c = i % 10;
		if (!isLake(r, c)) {
		    const type = BLUE_SETUP[i];
		    if (type !== ".")
			board[idx(r, c)] = {color: "blue", type};
		}
	    }
	}
    
	let selected = null;
	let currentPlayer = "red";
    
	function getPieceHTML(piece) {
	    if (!piece)
		return "";
	    const p = PIECES[piece.type];
	    let symbol = piece.type;
	    if (piece.type === "B")
		symbol = "ðŸ’£";
	    if (piece.type === "F")
		symbol = "âš‘";
	    if (piece.type === "S")
		symbol = "ðŸ•µï¸";
	
	    return `
	<div class="piece ${piece.color}" draggable="true">
	  ${symbol}
	  <span class="small-label">${piece.type}</span>
	</div>
      `;
	}
    
	function render() {
	    const cells = document.querySelectorAll(".cell");
	    cells.forEach(cell => {
		const i = cell.dataset.index;
		const piece = board[i];
		cell.innerHTML = piece ? getPieceHTML(piece) : "";
		cell.classList.remove("red", "blue", "selected");
		if (piece)
		    cell.classList.add(piece.color);
		if (selected && selected.index === Number(i)) {
		    cell.classList.add("selected");
		}
	    });
	
	    document.getElementById("status").textContent =
	    `${currentPlayer.toUpperCase()} to move${selected ? " â€¢ piece selected" : ""}`;
	}
    
	function isValidMove(from, to) {
	    const fr = Math.floor(from / 10), fc = from % 10;
	    const tr = Math.floor(to / 10), tc = to % 10;
	
	    // Must be adjacent (no diagonal)
	    const dr = Math.abs(fr - tr);
	    const dc = Math.abs(fc - tc);
	    if (dr + dc !== 1)
		return false;
	
	    // Can't move into lake
	    if (isLake(tr, tc))
		return false;
	
	    const targetPiece = board[to];
	    if (!targetPiece)
		return true; // empty square = ok
	
	    // Can't move onto own color
	    if (targetPiece.color === board[from].color)
		return false;
	
	    return true;
	}
    
	function attack(attacker, defender) {
	    const a = PIECES[attacker.type];
	    const d = PIECES[defender.type];
	
	    // Miner (2) removes bomb
	    if (a.rank === 3 && d.rank === -1)
		return "attacker_wins";
	
	    // Spy only beats Marshal (9)
	    if (a.rank === 10 && d.rank === 10 && a.name === "Spy")
		return "attacker_wins";
	
	    if (a.rank > d.rank)
		return "attacker_wins";
	    if (a.rank < d.rank)
		return "defender_wins";
	    return "both_die"; // equal rank
	}
    
	function movePiece(fromIdx, toIdx) {
	    const attacker = board[fromIdx];
	    const defender = board[toIdx];
	
	    if (!defender) {
		// Normal move to empty square
		board[toIdx] = attacker;
		board[fromIdx] = null;
		currentPlayer = currentPlayer === "red" ? "blue" : "red";
	    } else {
		// Attack
		const result = attack(attacker, defender);
	    
		if (result === "attacker_wins") {
		    board[toIdx] = attacker;
		    board[fromIdx] = null;
		} else if (result === "defender_wins") {
		    board[fromIdx] = null;
		} else {
		    // both die
		    board[fromIdx] = null;
		    board[toIdx] = null;
		}
	    
		currentPlayer = currentPlayer === "red" ? "blue" : "red";
	    }
	
	    selected = null;
	    render();
	}
    
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Event listeners
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
	function initBoard() {
	    const boardEl = document.getElementById("board");
	    boardEl.innerHTML = "";
	
	    for (let r = 0; r < 10; r++) {
		for (let c = 0; c < 10; c++) {
		    const cell = document.createElement("div");
		    cell.classList.add("cell");
		    if (isLake(r, c))
			cell.classList.add("lake");
		    cell.dataset.index = idx(r, c);
		
		    cell.addEventListener("click", () => {
			const i = Number(cell.dataset.index);
			const piece = board[i];
		    
			if (selected) {
			    // Try to move/attack
			    if (isValidMove(selected.index, i)) {
				movePiece(selected.index, i);
			    } else {
				// Invalid â†’ just deselect
				selected = null;
			    }
			} else if (piece && piece.color === currentPlayer) {
			    selected = {index: i, piece};
			}
		    
			render();
		    });
		
		    boardEl.appendChild(cell);
		}
	    }
	}
    
	function startGame() {
	    placePieces();
	    initBoard();
	    render();
	}
    
	startGame();
    </script>
</body>
</html>