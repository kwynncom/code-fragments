<!DOCTYPE html>
<html lang='en'>
<head>
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8'    />
<meta name='viewport' content='width=device-width, initial-scale=1.0' />

<title>map test - OL</title>
<style>
      html, body, #basicMap {
          width: 100%;
          height: 100%;
          margin: 0;
      }
</style>

<script src='/opt/ol/OpenLayers.debug.js'></script>
<script src='/opt/kwynn/js/utils.js'></script>

<script>
    var map;
            OpenLayers.Control.Click = OpenLayers.Class(OpenLayers.Control, {                
                defaultHandlerOptions: {
                    'single': true,
                    'double': false,
                    'pixelTolerance': 0,
                    'stopSingle': false,
                    'stopDouble': false
                },

                initialize: function(options) {
                    this.handlerOptions = OpenLayers.Util.extend(
                        {}, this.defaultHandlerOptions
                    );
                    OpenLayers.Control.prototype.initialize.apply(
                        this, arguments
                    ); 
                    this.handler = new OpenLayers.Handler.Click(
                        this, {
                            'click': this.trigger
                        }, this.handlerOptions
                    );
                }, 

                trigger: function(e) {
                    var lonlat = map.getLonLatFromPixel(e.xy);
                    cl(lonlat.lat % 90 + ' ' + lonlat.lon % 180);
                }

            });

            function init(){
        map = new OpenLayers.Map("basicMap");
        var mapnik         = new OpenLayers.Layer.OSM('l20', 'https://b.tile.openstreetmap.org/${z}/${x}/${y}.png');
        var fromProjection = new OpenLayers.Projection("EPSG:4326");   // Transform from WGS 1984
        var toProjection   = new OpenLayers.Projection("EPSG:900913"); // to Spherical Mercator Projection
        var position       = new OpenLayers.LonLat(13.41,52.52).transform( fromProjection, toProjection);
        var zoom           = 15; 

        map.addLayer(mapnik);
        map.setCenter(position, zoom );
            
                            var click = new OpenLayers.Control.Click();
                map.addControl(click);
                click.activate();
    }



window.addEventListener('DOMContentLoaded', (event) => {
    init();
 });
</script>


</head>
<body>
    <div id='basicMap'></div>
</body>
</html>

